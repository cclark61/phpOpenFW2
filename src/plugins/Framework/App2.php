<?php
//**************************************************************************************
//**************************************************************************************
/**
 * Application 2 Framework Class
 *
 * @package		phpOpenFW
 * @author 		Christian J. Clark
 * @copyright	Copyright (c) Christian J. Clark
 * @license		https://mit-license.org
 */
//**************************************************************************************
//**************************************************************************************

namespace phpOpenFW\Framework;

//**************************************************************************************
/**
 * Application 2 Framework Class
 */
//**************************************************************************************
class App2
{

	//*************************************************************************
	/**
	* Run Method
	**/
	//*************************************************************************
	public static function Run($file_path, Array $args=[])
	{
		//============================================================
		// Default Args
		//============================================================
		$load_config = true;

		//============================================================
		// Extract Args
		//============================================================
		extract($args);

		//============================================================
		// Must specify an applciation directory
		//============================================================
		if (!is_dir($file_path)) {
			die('You must give a valid application path.');
		}

		//============================================================
		// Bootstrap the Core
		//============================================================
		\phpOpenFW\Framework\Core::Bootstrap($file_path);

		//============================================================
		// Load Config if not logged in
		//============================================================
		if ($load_config) {
			if (empty($_SESSION['PHPOPENFW_LOGGED_IN'])) {
			    \phpOpenFW\Framework\Core::load_config();
			}
		}

		//============================================================
		// Constants
		//============================================================
		define('PHPOPENFW_HTML_PATH', $_SESSION['html_path']);

		//============================================================
		// Create New Page
		//============================================================
		$page = new App2\Page();
	}

}
